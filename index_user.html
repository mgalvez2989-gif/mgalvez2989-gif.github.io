<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AutoParts | Taller virtual</title>
  <style>
    :root{
      /* Apple-ish: neutros, poco contraste, mucho aire */
      --bg1:#f6f7fb;
      --bg2:#f2f4f8;

      --card:#ffffff;
      --card2:#f3f5f9;
      --line:#e7e9f0;

      --text:#0f172a;
      --muted:#6b7280;

      --primary:#2563eb;
      --ok:#16a34a;
      --warn:#f59e0b;
      --bad:#ef4444;

      --shadow:0 18px 40px rgba(15,23,42,.08);
      --shadow2:0 10px 24px rgba(15,23,42,.06);
      --radius:18px;
      --radius2:14px;

      --blur: blur(14px);
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial;
      color:var(--text);
      background:
        radial-gradient(1200px 700px at 15% -10%, rgba(37,99,235,.10), transparent 55%),
        radial-gradient(900px 600px at 85% 5%, rgba(22,163,74,.08), transparent 55%),
        linear-gradient(180deg, var(--bg1) 0%, var(--bg2) 100%);
    }
    a{color:inherit; text-decoration:none}

    .container{max-width:1240px; margin:0 auto; padding:0 18px;}
    header{
      position:sticky; top:0; z-index:50;
      background:rgba(246,247,251,.78);
      backdrop-filter: var(--blur);
      border-bottom:1px solid rgba(231,233,240,.9);
    }
    .topbar{
      display:flex; align-items:center; gap:12px;
      padding:14px 0;
    }
    .logo{
      font-weight:900;
      letter-spacing:.2px;
      font-size:18px;
      display:flex; align-items:center; gap:10px;
    }
    .dotLogo{
      width:10px; height:10px; border-radius:999px;
      background:linear-gradient(135deg, rgba(37,99,235,.95), rgba(22,163,74,.75));
      box-shadow:0 8px 18px rgba(37,99,235,.18);
    }

    .pill{
      border:1px solid rgba(231,233,240,.95);
      background:rgba(255,255,255,.78);
      border-radius:999px;
      padding:10px 12px;
      display:flex; align-items:center; gap:10px;
      color:var(--muted);
      box-shadow: 0 10px 22px rgba(15,23,42,.03);
    }
    .search{flex:1; min-width:260px;}
    .search input{
      width:100%;
      background:transparent;
      border:0;
      outline:0;
      color:var(--text);
      font-size:14px;
    }
    .btn{
      border:1px solid rgba(231,233,240,.95);
      background:rgba(255,255,255,.78);
      color:var(--text);
      padding:10px 12px;
      border-radius:14px;
      cursor:pointer;
      transition:transform .06s ease, box-shadow .15s ease, background .15s ease;
      white-space:nowrap;
      box-shadow: 0 10px 22px rgba(15,23,42,.03);
    }
    .btn:hover{box-shadow: var(--shadow2)}
    .btn:active{transform:translateY(1px)}
    .btn.primary{
      background:linear-gradient(180deg, rgba(37,99,235,1) 0%, rgba(29,78,216,1) 100%);
      color:white;
      border-color:transparent;
      font-weight:800;
      box-shadow:0 18px 28px rgba(37,99,235,.18);
    }
    .btn.ghost{background:transparent}

    .ssl{
      display:flex; align-items:center; gap:8px;
      border:1px solid rgba(231,233,240,.95);
      background:rgba(255,255,255,.72);
      padding:8px 10px;
      border-radius:999px;
      color:var(--muted);
      font-size:12px;
      box-shadow: 0 10px 22px rgba(15,23,42,.03);
    }
    .ssl b{color:var(--text); font-weight:900}

    /* Drawer menu */
    .overlay{position:fixed; inset:0; background:rgba(15,23,42,.25); display:none; z-index:60}
    .overlay.show{display:block}
    .drawer{
      position:fixed; top:0; left:0; height:100%; width:360px;
      background:rgba(255,255,255,.86);
      backdrop-filter: var(--blur);
      border-right:1px solid rgba(231,233,240,.95);
      transform:translateX(-105%);
      transition:transform .25s ease;
      padding:16px;
      z-index:70;
      box-shadow: var(--shadow);
    }
    .drawer.open{transform:translateX(0)}
    .drawer .head{display:flex; align-items:center; justify-content:space-between; gap:10px}
    .drawer .nav{margin-top:12px}
    .drawer .nav a{
      display:flex; align-items:center; gap:10px;
      padding:12px 10px;
      border-radius:14px;
      border:1px solid transparent;
      color:var(--text);
    }
    .drawer .nav a:hover{background:rgba(243,245,249,.9); border-color:rgba(231,233,240,.95)}
    .drawer .nav a.active{
      background:rgba(37,99,235,.10);
      border-color:rgba(37,99,235,.25);
    }
    .drawer .foot{
      position:absolute; left:16px; right:16px; bottom:16px;
      color:var(--muted); font-size:12px;
    }

    /* Layout */
    .card{
      background:rgba(255,255,255,.92);
      border:1px solid rgba(231,233,240,.95);
      border-radius:var(--radius);
      padding:18px;
      box-shadow: var(--shadow2);
    }
    .card.soft{background:rgba(243,245,249,.85); box-shadow:none}
    .hero{padding:18px 0 10px}
    .hero-grid{
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap:14px;
    }
    .h-title{margin:0 0 10px; font-size:18px; font-weight:900}
    .sub{color:var(--muted); margin:0 0 10px; font-size:13px; line-height:1.45}
    .cta{display:flex; gap:10px; flex-wrap:wrap}
    .row{display:flex; gap:14px; align-items:stretch; flex-wrap:wrap}

    .hello{
      font-size:14px; font-weight:900;
      background:linear-gradient(90deg, rgba(37,99,235,.12), rgba(22,163,74,.10));
      border:1px solid rgba(37,99,235,.18);
      padding:10px 12px;
      border-radius:14px;
      margin-bottom:12px;
    }

    /* Secondary top buttons (your yellow notes but now elegant) */
    .menu-row{display:flex; gap:10px; flex-wrap:wrap; margin-top:10px}
    .tag{
      border:1px solid rgba(231,233,240,.95);
      background:rgba(255,255,255,.78);
      color:var(--text);
      padding:10px 12px;
      border-radius:14px;
      font-weight:850;
      cursor:pointer;
      box-shadow: 0 10px 22px rgba(15,23,42,.03);
    }
    .tag.active{border-color:rgba(37,99,235,.35); box-shadow:0 0 0 3px rgba(37,99,235,.10) inset;}

    .mini-info{display:grid; grid-template-columns:repeat(3, 1fr); gap:10px; margin-top:14px;}
    .mini-card{
      border:1px solid rgba(231,233,240,.95);
      border-radius:16px;
      background:rgba(243,245,249,.85);
      padding:12px;
    }
    .mini-card .t{font-weight:900}
    .mini-card .d{color:var(--muted); font-size:12px; margin-top:4px}

    .section-title{
      display:flex; align-items:flex-end; justify-content:space-between;
      margin:16px 0 10px;
    }
    .section-title h2{margin:0; font-size:16px; font-weight:900}
    .chip{
      font-size:12px;
      color:var(--muted);
      border:1px solid rgba(231,233,240,.95);
      background:rgba(255,255,255,.65);
      padding:6px 10px;
      border-radius:999px;
      box-shadow: 0 10px 22px rgba(15,23,42,.02);
    }

    /* Catalog */
    .grid{
      display:grid;
      grid-template-columns: 300px 1fr;
      gap:14px;
      padding-bottom:40px;
    }
    .filters .label{color:var(--muted); font-size:12px; margin-top:10px}
    .toggle{
      display:flex; align-items:center; justify-content:space-between;
      padding:12px;
      border-radius:16px;
      border:1px solid rgba(231,233,240,.95);
      background:rgba(243,245,249,.85);
      margin-top:10px;
      color:var(--muted);
      font-size:13px;
    }
    .toggle b{color:var(--ok)}
    .pill-row{display:flex; gap:8px; flex-wrap:wrap; margin-top:8px}
    .pill2{
      border:1px solid rgba(231,233,240,.95);
      background:rgba(255,255,255,.78);
      color:var(--muted);
      padding:7px 10px;
      border-radius:999px;
      font-size:12px;
      cursor:pointer;
      box-shadow: 0 10px 22px rgba(15,23,42,.02);
    }
    .pill2.active{color:var(--text); border-color:rgba(37,99,235,.35)}

    .products{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:12px;
    }
    .p{
      border:1px solid rgba(231,233,240,.95);
      border-radius:var(--radius);
      background:rgba(255,255,255,.92);
      padding:14px;
      min-height:265px;
      display:flex; flex-direction:column; justify-content:space-between;
      box-shadow: 0 12px 26px rgba(15,23,42,.05);
    }
    .badge{
      display:inline-flex; gap:6px; align-items:center;
      padding:6px 10px;
      border-radius:999px;
      font-size:12px;
      margin-bottom:10px;
      width:max-content;
    }
    .badge.ok{background:rgba(22,163,74,.10); border:1px solid rgba(22,163,74,.20); color:#14532d}
    .badge.warn{background:rgba(245,158,11,.12); border:1px solid rgba(245,158,11,.22); color:#92400e}
    .p .title{font-weight:900; margin:0 0 6px}
    .p .muted{color:var(--muted); font-size:13px; margin:0 0 10px}
    .p .price{display:flex; justify-content:space-between; align-items:center}
    .p .price strong{font-size:16px}
    .p .type{font-size:12px; color:var(--muted); border:1px solid rgba(231,233,240,.95); padding:6px 9px; border-radius:999px; background:rgba(243,245,249,.85)}
    .p .actions{display:flex; gap:10px; margin-top:10px; flex-wrap:wrap}

    /* Pages */
    .page{display:none}
    .page.active{display:block}

    /* Inputs */
    .form-row{display:grid; grid-template-columns:1fr 1fr; gap:10px}
    .field{
      width:100%;
      border:1px solid rgba(231,233,240,.95);
      background:rgba(255,255,255,.85);
      border-radius:14px;
      padding:10px 12px;
      color:var(--text);
      outline:0;
      box-shadow: 0 10px 22px rgba(15,23,42,.02);
    }
    .field::placeholder{color:rgba(107,114,128,.85)}

    /* Garage */
    .garage-grid{display:grid; grid-template-columns: 1fr 1fr; gap:14px;}
    .veh-list{display:grid; gap:10px}
    .veh{
      border:1px solid rgba(231,233,240,.95);
      border-radius:16px;
      background:rgba(255,255,255,.88);
      padding:12px;
      display:flex; justify-content:space-between; align-items:center; gap:10px;
      cursor:pointer;
      box-shadow: 0 12px 26px rgba(15,23,42,.04);
    }
    .veh.active{border-color:rgba(37,99,235,.35); box-shadow:0 0 0 3px rgba(37,99,235,.10) inset;}
    .veh .name{font-weight:900}
    .veh .meta{color:var(--muted); font-size:12px; margin-top:2px}

    /* Planificador (Dashboard + Checklist) */
    .planDash{display:grid; grid-template-columns:1fr 1fr; gap:14px; margin-bottom:14px;}
    .carBox{
      display:flex; gap:14px; align-items:center; flex-wrap:wrap;
      padding:14px;
      border-radius:16px;
      background:rgba(243,245,249,.85);
      border:1px dashed rgba(107,114,128,.25);
    }
    .carSvg{
      width:170px; height:110px;
      background:rgba(15,23,42,.02);
      border:1px solid rgba(231,233,240,.95);
      border-radius:14px;
      display:flex; align-items:center; justify-content:center;
    }
    .legend{display:flex; gap:10px; flex-wrap:wrap}
    .dot{display:inline-flex; align-items:center; gap:8px; color:var(--muted); font-size:12px}
    .circle{width:10px; height:10px; border-radius:50%}
    .circle.ok{background:var(--ok)}
    .circle.warn{background:var(--warn)}
    .circle.bad{background:var(--bad)}

    .comp-list{display:grid; gap:10px}
    .comp{
      border:1px solid rgba(231,233,240,.95);
      background:rgba(255,255,255,.92);
      border-radius:18px;
      padding:12px;
      box-shadow: 0 12px 26px rgba(15,23,42,.04);
    }
    .comp .top{display:flex; justify-content:space-between; gap:10px; align-items:flex-start}
    .comp .name{font-weight:900}
    .comp .small{color:var(--muted); font-size:12px; margin-top:2px}
    .bar{
      height:8px; border-radius:999px; background:rgba(107,114,128,.14);
      overflow:hidden; margin-top:10px;
    }
    .bar > div{height:100%}
    .status-pill{
      font-size:12px; padding:6px 10px; border-radius:999px;
      border:1px solid rgba(231,233,240,.95);
      background:rgba(243,245,249,.85);
      color:var(--muted);
      width:max-content;
    }

    /* Chat */
    .chat-fab{
      position:fixed; right:18px; bottom:18px; z-index:80;
      width:56px; height:56px; border-radius:999px;
      border:1px solid rgba(37,99,235,.25);
      background:rgba(255,255,255,.86);
      color:var(--text);
      cursor:pointer;
      display:flex; align-items:center; justify-content:center;
      box-shadow: var(--shadow);
    }
    .chat-panel{
      position:fixed; right:18px; bottom:86px; z-index:80;
      width:380px; max-width: calc(100vw - 36px);
      background:rgba(255,255,255,.88);
      backdrop-filter: var(--blur);
      border:1px solid rgba(231,233,240,.95);
      border-radius:18px;
      box-shadow: var(--shadow);
      display:none;
      overflow:hidden;
    }
    .chat-panel.show{display:block}
    .chat-head{display:flex; align-items:center; justify-content:space-between; padding:12px 12px; border-bottom:1px solid rgba(231,233,240,.95)}
    .chat-body{padding:12px; height:260px; overflow:auto}
    .msg{
      background:rgba(243,245,249,.85);
      border:1px solid rgba(231,233,240,.95);
      padding:10px 10px;
      border-radius:14px;
      margin-bottom:10px;
      color:var(--muted);
      font-size:13px;
    }
    .chat-foot{display:flex; gap:10px; padding:12px; border-top:1px solid rgba(231,233,240,.95)}
    .chat-foot input{flex:1}

    /* Responsive */
    @media(max-width:1100px){
      .hero-grid{grid-template-columns:1fr}
      .grid{grid-template-columns:1fr}
      .products{grid-template-columns:1fr}
      .garage-grid{grid-template-columns:1fr}
      .planDash{grid-template-columns:1fr}
      .ssl{display:none}
    }
  </style>
</head>

<body>
<header>
  <div class="container">
    <div class="topbar">
      <button class="btn" id="openMenu" title="Men√∫">‚ò∞</button>

      <div class="logo">
        <span class="dotLogo"></span>
        AutoParts
      </div>

      <div class="pill search" aria-label="buscador">
        üîé <input id="searchInput" placeholder="Busca por nombre, c√≥digo o sube foto (ej: filtro de aceite)" />
      </div>

      <div class="pill" title="Veh√≠culo activo">
        üöó <span>Mi veh√≠culo: <b id="activeVehicleLabel" style="color:var(--text)">Kia Rio 2018</b></span>
      </div>

      <div class="ssl" title="Conexi√≥n segura">
        üîí <b>SSL</b> <span>Certificado de seguridad</span>
      </div>

      <button class="btn">Cuenta</button>
      <button class="btn primary">üõí Carrito (<span id="cartCount">2</span>)</button>
    </div>
  </div>
</header>

<!-- Drawer (MEN√ö m√°x 7) -->
<div class="overlay" id="overlay"></div>
<aside class="drawer" id="drawer" aria-hidden="true">
  <div class="head">
    <div style="display:flex; align-items:center; gap:10px">
      <div class="logo" style="font-size:16px"><span class="dotLogo"></span>AutoParts</div>
      <span class="chip" id="vehChip">Perfil: Kia Rio 2018</span>
    </div>
    <button class="btn" id="closeMenu">‚úï</button>
  </div>

  <p class="sub" style="margin-top:10px">Navegaci√≥n (m√°x 7)</p>

  <!-- EXACTAMENTE 7 ITEMS -->
  <nav class="nav" id="nav">
    <a href="#" data-page="inicio" class="active">üè† Inicio</a>
    <a href="#" data-page="garaje">üöó Mi garaje</a>
    <a href="#" data-page="nuevaCotizacion">üßæ Nueva cotizaci√≥n</a>
    <a href="#" data-page="cotizaciones">üìÑ Ver cotizaciones</a>
    <a href="#" data-page="planificador">üõ†Ô∏è Planificador / Historial</a>
    <a href="#" data-page="accesorios">‚ú® Accesorios</a>
    <a href="#" data-page="quienesSomos">‚ÑπÔ∏è Qui√©nes somos</a>
  </nav>

  <div class="foot">
    Tip: selecciona tu veh√≠culo para que la b√∫squeda y recomendaciones sean precisas.
  </div>
</aside>

<main class="container">

  <!-- INICIO -->
  <section class="page active" id="page-inicio">
    <div class="hero">
      <div class="hello">HOLA JULIO CESAR! BIENVENIDO A TU TALLER VIRTUAL</div>

      <!-- Botonera r√°pida (no cuenta como el men√∫ del curso; el men√∫ real es el drawer) -->
      <div class="menu-row">
        <button class="tag active" data-pagebtn="inicio">Inicio</button>
        <button class="tag" data-pagebtn="garaje">Mi garaje</button>
        <button class="tag" data-pagebtn="nuevaCotizacion">Nueva cotizaci√≥n</button>
        <button class="tag" data-pagebtn="cotizaciones">Ver cotizaciones</button>
      </div>

      <div class="hero-grid" style="margin-top:14px;">
        <div class="card">
          <h3 class="h-title">Dashboard simple</h3>
          <p class="sub">
            - M√©tricas: gasto por mantenimiento (por a√±o)<br>
            - L√≠nea de tiempo: cu√°nto falta para el pr√≥ximo mantenimiento<br>
            - Valor agregado: promociones, alianzas, asesor y b√∫squeda guiada
          </p>

          <div class="mini-info">
            <div class="mini-card">
              <div class="t">Compatibilidad</div>
              <div class="d">Filtrado por tu modelo</div>
            </div>
            <div class="mini-card">
              <div class="t">OEM vs Alterno</div>
              <div class="d">Comparaci√≥n r√°pida</div>
            </div>
            <div class="mini-card">
              <div class="t">Omnicanal</div>
              <div class="d">Recordatorios de mantto</div>
            </div>
          </div>

          <div class="section-title" style="margin-top:16px">
            <h2>Promociones</h2>
            <span class="chip">Destacados</span>
          </div>
          <div class="row">
            <div class="mini-card" style="flex:1">
              <div class="t">-10% filtros</div>
              <div class="d">Usuarios registrados (hasta fin de mes)</div>
            </div>
            <div class="mini-card" style="flex:1">
              <div class="t">Entrega diferida</div>
              <div class="d">Compra hoy, entrega en fecha de mantto</div>
            </div>
          </div>

          <div class="section-title">
            <h2>Alianzas</h2>
            <span class="chip">Talleres asociados</span>
          </div>
          <div class="row">
            <div class="mini-card" style="flex:1">
              <div class="t">Taller A</div>
              <div class="d">Descuento mano de obra con tu cuenta</div>
            </div>
            <div class="mini-card" style="flex:1">
              <div class="t">Taller B</div>
              <div class="d">Diagn√≥stico b√°sico sin costo</div>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="section-title">
            <h2>Pr√≥ximo mantenimiento</h2>
            <span class="chip">Basado en <span id="kmLabel">78,400</span> km</span>
          </div>
          <p class="sub">
            A los <b>80,000 km</b> te sugerimos: aceite + filtro aceite + filtro aire + revisi√≥n frenos.
          </p>

          <div class="cta">
            <button class="btn primary" id="btnVerCotMantto">Ver cotizaci√≥n de prox mantenimiento</button>
            <button class="btn" data-goto="planificador">Ver estatus del veh√≠culo</button>
          </div>

          <div class="card soft" style="margin-top:14px;">
            <h3 class="h-title" style="margin-bottom:6px">Preliminar de lo que se necesita</h3>
            <div class="sub" style="margin:0">
              <div style="display:flex; justify-content:space-between; gap:10px">
                <span>- Aceite Motul x 1 gal</span><b style="color:var(--ok)">Necesario</b>
              </div>
              <div style="display:flex; justify-content:space-between; gap:10px">
                <span>- Filtro de aceite (modelo‚Ä¶)</span><b style="color:var(--ok)">Necesario</b>
              </div>
              <div style="display:flex; justify-content:space-between; gap:10px">
                <span>- Filtro de aire (modelo‚Ä¶)</span><b style="color:var(--ok)">Necesario</b>
              </div>
              <div style="display:flex; justify-content:space-between; gap:10px">
                <span>- Disco de freno</span><b style="color:var(--warn)">Opcional</b>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>

    <div class="section-title">
      <h2>Cat√°logo (vista r√°pida)</h2>
      <span class="chip">Solo compatibles: ON</span>
    </div>

    <section class="grid">
      <aside class="card">
        <h2 style="margin:0; font-size:15px; font-weight:900">Filtros</h2>
        <div class="toggle">
          <span>Mostrar solo compatibles</span>
          <b>ON</b>
        </div>

        <div class="label">Tipo</div>
        <div class="pill-row">
          <span class="pill2 active">Original (OEM)</span>
          <span class="pill2">Alternativo</span>
          <span class="pill2">Gen√©rico</span>
        </div>

        <div class="label">Categor√≠as</div>
        <div class="pill-row">
          <span class="pill2">Aceite</span>
          <span class="pill2 active">Filtros</span>
          <span class="pill2">Frenos</span>
          <span class="pill2">Bater√≠a</span>
        </div>

        <div class="label">Ayuda</div>
        <div class="pill-row">
          <span class="pill2" id="btnFoto">üì∑ Buscar por foto</span>
          <span class="pill2" id="btnAsesor">üí¨ Hablar con asesor</span>
        </div>
      </aside>

      <section class="products">
        <div class="p">
          <div>
            <span class="badge ok">‚úÖ Compatible</span>
            <p class="title">Filtro de aceite (OEM)</p>
            <p class="muted"><span id="vehInline">Kia Rio 2018</span> ‚Ä¢ C√≥digo: KIA-OF-218</p>
          </div>
          <div>
            <div class="price">
              <strong>S/ 48</strong>
              <span class="type">Original</span>
            </div>
            <div class="actions">
              <button class="btn primary">Agregar</button>
              <button class="btn">Ver alternos</button>
            </div>
          </div>
        </div>

        <div class="p">
          <div>
            <span class="badge ok">‚úÖ Compatible</span>
            <p class="title">Aceite 5W-30 (Alternativo)</p>
            <p class="muted">Recomendado para tu motor ‚Ä¢ 4L</p>
          </div>
          <div>
            <div class="price">
              <strong>S/ 89</strong>
              <span class="type">Alternativo</span>
            </div>
            <div class="actions">
              <button class="btn primary">Agregar</button>
              <button class="btn">Comparar</button>
            </div>
          </div>
        </div>

        <div class="p">
          <div>
            <span class="badge warn">‚ö†Ô∏è Revisar</span>
            <p class="title">Pastillas de freno (Gen√©rico)</p>
            <p class="muted">Puede variar por versi√≥n ‚Ä¢ confirma con foto</p>
          </div>
          <div>
            <div class="price">
              <strong>S/ 120</strong>
              <span class="type">Gen√©rico</span>
            </div>
            <div class="actions">
              <button class="btn" id="btnSubirFoto">üì∑ Subir foto</button>
              <button class="btn" id="btnAsesor2">Asesor</button>
            </div>
          </div>
        </div>
      </section>
    </section>
  </section>

  <!-- GARAJE -->
  <section class="page" id="page-garaje">
    <div class="section-title">
      <h2>Mi garaje</h2>
      <span class="chip">Selecciona un veh√≠culo para activar su perfil</span>
    </div>

    <div class="garage-grid">
      <div class="card">
        <h3 class="h-title">Veh√≠culos registrados</h3>
        <div class="veh-list" id="vehList"></div>
      </div>

      <div class="card">
        <h3 class="h-title">Agregar nuevo veh√≠culo</h3>
        <p class="sub">Esto define compatibilidad, planificador y recomendaciones.</p>

        <div class="form-row">
          <input class="field" id="fMarca" placeholder="Marca (ej: Volkswagen)">
          <input class="field" id="fModelo" placeholder="Modelo (ej: Tiguan)">
          <input class="field" id="fAnio" placeholder="A√±o (ej: 2020)" type="number">
          <input class="field" id="fMotor" placeholder="Motor/versi√≥n (ej: 1.4 TSI)">
          <input class="field" id="fKm" placeholder="Km actuales (ej: 78400)" type="number">
          <input class="field" id="fPlaca" placeholder="Placa/VIN (opcional)">
        </div>

        <div class="cta" style="margin-top:12px">
          <button class="btn primary" id="btnAddVeh">Guardar veh√≠culo</button>
          <button class="btn" data-goto="planificador">Ir al planificador</button>
        </div>
      </div>
    </div>
  </section>

  <!-- NUEVA COTIZACI√ìN -->
  <section class="page" id="page-nuevaCotizacion">
    <div class="section-title">
      <h2>Nueva cotizaci√≥n</h2>
      <span class="chip">Basada en tu veh√≠culo activo</span>
    </div>

    <div class="card">
      <p class="sub">
        Crea una cotizaci√≥n r√°pida (para el curso). Luego podr√°s verla en ‚ÄúVer cotizaciones‚Äù.
      </p>

      <div class="form-row">
        <input class="field" id="qTitulo" placeholder="T√≠tulo (ej: Mantenimiento 80,000 km)">
        <input class="field" id="qNotas" placeholder="Notas (opcional)">
      </div>

      <div class="form-row" style="margin-top:10px">
        <input class="field" id="qItem" placeholder="√çtem (ej: Filtro de aceite OEM)">
        <input class="field" id="qPrecio" placeholder="Precio (S/)" type="number">
      </div>

      <div class="cta" style="margin-top:12px">
        <button class="btn" id="btnAddItem">Agregar √≠tem</button>
        <button class="btn primary" id="btnSaveQuote">Guardar cotizaci√≥n</button>
      </div>

      <div class="card soft" style="margin-top:14px;">
        <h3 class="h-title" style="margin-bottom:8px">√çtems en esta cotizaci√≥n</h3>
        <div id="quoteItems" class="sub" style="margin:0"></div>
      </div>
    </div>
  </section>

  <!-- COTIZACIONES -->
  <section class="page" id="page-cotizaciones">
    <div class="section-title">
      <h2>Mis cotizaciones</h2>
      <span class="chip" id="quotesCount">0 registradas</span>
    </div>

    <div class="card">
      <div class="sub" id="quotesTable" style="margin:0"></div>
    </div>
  </section>

  <!-- PLANIFICADOR / HISTORIAL -->
  <section class="page" id="page-planificador">
    <div class="section-title">
      <h2>Planificador / Historial / Estatus</h2>
      <span class="chip">Checklist + Dashboard</span>
    </div>

    <!-- DASHBOARD -->
    <div class="planDash">
      <div class="card">
        <div class="section-title" style="margin-top:0">
          <h2>Resumen</h2>
          <span class="chip">Km actual: <span id="kmNow">78,400</span></span>
        </div>

        <div class="row" style="gap:10px">
          <div class="mini-card" style="flex:1; min-width:160px;">
            <div class="t">üü¢ OK</div>
            <div class="d"><b id="kpiOk">0</b> componentes</div>
          </div>
          <div class="mini-card" style="flex:1; min-width:160px;">
            <div class="t">üü° Pr√≥ximo</div>
            <div class="d"><b id="kpiWarn">0</b> componentes</div>
          </div>
          <div class="mini-card" style="flex:1; min-width:160px;">
            <div class="t">üî¥ Urgente</div>
            <div class="d"><b id="kpiBad">0</b> componentes</div>
          </div>
        </div>

        <div class="card soft" style="margin-top:12px;">
          <div style="display:flex; gap:10px; align-items:center; flex-wrap:wrap">
            <input class="field" id="kmUpdate" type="number" placeholder="Actualizar km (ej: 79200)">
            <button class="btn primary" id="btnUpdateKm">Actualizar</button>
            <button class="btn" id="btnAskKm">Recordarme actualizar km</button>
          </div>
          <p class="sub" style="margin-top:10px">
            (Demo) recalculamos pr√≥ximos cambios seg√∫n tu uso real.
          </p>
        </div>
      </div>

      <div class="card">
        <div class="section-title" style="margin-top:0">
          <h2>Sem√°foro del veh√≠culo</h2>
          <span class="chip" id="trafficLabel">Estado general: ‚Äî</span>
        </div>

        <div class="carBox">
          <div class="carSvg">
            <svg width="150" height="85" viewBox="0 0 220 120" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M40 70 L60 40 C65 33 75 28 90 28 H140 C155 28 165 33 170 40 L190 70" stroke="rgba(15,23,42,.55)" stroke-width="4" stroke-linecap="round"/>
              <path d="M35 70 H195 C205 70 210 75 210 85 V90 C210 100 205 105 195 105 H35 C25 105 20 100 20 90 V85 C20 75 25 70 35 70Z" stroke="rgba(15,23,42,.55)" stroke-width="4"/>
              <circle cx="60" cy="105" r="12" stroke="rgba(15,23,42,.55)" stroke-width="4"/>
              <circle cx="170" cy="105" r="12" stroke="rgba(15,23,42,.55)" stroke-width="4"/>
            </svg>
          </div>
          <div style="flex:1">
            <div class="legend">
              <span class="dot"><span class="circle ok"></span> OK</span>
              <span class="dot"><span class="circle warn"></span> Pr√≥ximo</span>
              <span class="dot"><span class="circle bad"></span> Urgente</span>
            </div>
            <p class="sub" style="margin:10px 0 0">
              Si hay 1 ‚ÄúUrgente‚Äù, el estado general pasa a rojo. Si no hay urgentes pero s√≠ ‚ÄúPr√≥ximos‚Äù, pasa a amarillo.
            </p>
          </div>
        </div>

        <div class="card soft" style="margin-top:12px;">
          <h3 class="h-title" style="margin-bottom:8px">Registrar mantenimiento externo</h3>
          <div class="form-row">
            <input class="field" id="extComp" placeholder="Componente (ej: Disco de freno)">
            <input class="field" id="extKm" type="number" placeholder="Km en que lo cambiaste (ej: 76000)">
          </div>
          <div class="cta" style="margin-top:10px">
            <button class="btn" id="btnRegExt">Registrar</button>
          </div>
        </div>
      </div>
    </div>

    <!-- CHECKLIST -->
    <div class="section-title">
      <h2>Checklist de componentes</h2>
      <span class="chip">Consumibles + reemplazo</span>
    </div>

    <div class="card">
      <div class="sub" style="margin:0 0 10px">
        Marca ‚úÖ si ya lo cambiaste fuera del portal (o reg√≠stralo arriba). Esto ajusta el diagn√≥stico.
      </div>
      <div class="comp-list" id="compList"></div>
    </div>
  </section>

  <!-- ACCESORIOS -->
  <section class="page" id="page-accesorios">
    <div class="section-title">
      <h2>Accesorios</h2>
      <span class="chip">Limpia parabrisas ‚Ä¢ aromatizadores ‚Ä¢ tapetes‚Ä¶</span>
    </div>

    <div class="products">
      <div class="p">
        <div>
          <span class="badge ok">‚≠ê Popular</span>
          <p class="title">Aromatizador premium</p>
          <p class="muted">Duraci√≥n: 30 d√≠as</p>
        </div>
        <div class="price"><strong>S/ 19</strong><span class="type">Accesorio</span></div>
        <div class="actions"><button class="btn primary">Agregar</button></div>
      </div>

      <div class="p">
        <div>
          <span class="badge ok">‚≠ê Popular</span>
          <p class="title">Tapetes universales</p>
          <p class="muted">Antideslizantes</p>
        </div>
        <div class="price"><strong>S/ 89</strong><span class="type">Accesorio</span></div>
        <div class="actions"><button class="btn primary">Agregar</button></div>
      </div>

      <div class="p">
        <div>
          <span class="badge warn">‚ö†Ô∏è Elegir tama√±o</span>
          <p class="title">Limpia parabrisas</p>
          <p class="muted">Indica pulgadas / modelo</p>
        </div>
        <div class="price"><strong>S/ 35</strong><span class="type">Accesorio</span></div>
        <div class="actions"><button class="btn">Ver opciones</button></div>
      </div>
    </div>
  </section>

  <!-- QUI√âNES SOMOS -->
  <section class="page" id="page-quienesSomos">
    <div class="section-title">
      <h2>Qui√©nes somos</h2>
      <span class="chip">Misi√≥n ‚Ä¢ Visi√≥n ‚Ä¢ Contacto</span>
    </div>

    <div class="hero-grid">
      <div class="card">
        <h3 class="h-title">Misi√≥n</h3>
        <p class="sub">Hacer que la compra de repuestos sea simple, compatible y transparente (OEM vs alternos), con asistencia cuando el usuario no conoce el nombre.</p>
        <h3 class="h-title">Visi√≥n</h3>
        <p class="sub">Ser el ‚Äútaller virtual‚Äù l√≠der en experiencia omnicanal y mantenimiento planificado.</p>
      </div>

      <div class="card">
        <h3 class="h-title">Contacto</h3>
        <p class="sub">WhatsApp: +51 XXX XXX XXX<br>Email: soporte@autoparts.pe<br>Horario: Lun‚ÄìS√°b</p>
        <h3 class="h-title" style="margin-top:16px">Alianzas</h3>
        <p class="sub">Talleres asociados con descuentos y atenci√≥n preferencial para usuarios del portal.</p>
        <h3 class="h-title" style="margin-top:16px">Promociones</h3>
        <p class="sub">Campa√±as por categor√≠a, por kilometraje o por temporada.</p>
      </div>
    </div>
  </section>

</main>

<!-- Chat FAB -->
<button class="chat-fab" id="chatFab" title="Chatear con un asesor">üí¨</button>

<div class="chat-panel" id="chatPanel" aria-hidden="true">
  <div class="chat-head">
    <div style="font-weight:900">Asesor</div>
    <button class="btn" id="chatClose">‚úï</button>
  </div>
  <div class="chat-body" id="chatBody">
    <div class="msg">Hola üëã Soy tu asesor. ¬øBuscas un repuesto por nombre, c√≥digo o foto?</div>
    <div class="msg">Tip: recuerda tener seleccionado tu veh√≠culo para asegurar compatibilidad.</div>
  </div>
  <div class="chat-foot">
    <input class="field" id="chatInput" placeholder="Escribe tu consulta‚Ä¶">
    <button class="btn primary" id="chatSend">Enviar</button>
  </div>
</div>

<script>
  // ---- Estado demo ----
  let vehicles = [
    { id: 1, label: "Kia Rio 2018", marca:"Kia", modelo:"Rio", anio:2018, motor:"1.4", km:78400, placa:"" },
    { id: 2, label: "VW Tiguan 2020", marca:"Volkswagen", modelo:"Tiguan", anio:2020, motor:"1.4 TSI", km:41200, placa:"" },
    { id: 3, label: "Toyota Corolla 2016", marca:"Toyota", modelo:"Corolla", anio:2016, motor:"1.8", km:93500, placa:"" },
  ];
  let activeVehicleId = 1;

  // Planificador: componentes base (vida √∫til demo)
  let components = [
    { key:"aceite", name:"Aceite de motor", lifeKm: 5000, cost: 89, lastChangeKm: 75000 },
    { key:"filtro_aceite", name:"Filtro de aceite", lifeKm: 5000, cost: 48, lastChangeKm: 75000 },
    { key:"filtro_aire", name:"Filtro de aire", lifeKm: 10000, cost: 65, lastChangeKm: 70000 },
    { key:"pastillas", name:"Pastillas de freno", lifeKm: 30000, cost: 120, lastChangeKm: 50000 },
    { key:"discos", name:"Disco de freno", lifeKm: 65000, cost: 380, lastChangeKm: 0 }, // 0 = desde compra
  ];

  let quotes = [];
  let draftItems = [];

  // ---- Utilidades ----
  const $ = (id)=>document.getElementById(id);
  const fmtKm = (n)=> (n||0).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
  const getActiveVehicle = ()=> vehicles.find(v=>v.id===activeVehicleId) || vehicles[0];

  function setActiveVehicle(id){
    activeVehicleId = id;
    const v = getActiveVehicle();
    $("activeVehicleLabel").textContent = v.label;
    $("vehChip").textContent = "Perfil: " + v.label;
    $("vehInline").textContent = v.label;
    $("kmLabel").textContent = fmtKm(v.km);
    $("kmNow").textContent = fmtKm(v.km);
    renderVehList();
    renderComponents();
  }

  // ---- Men√∫ / navegaci√≥n ----
  const drawer = $("drawer");
  const overlay = $("overlay");

  $("openMenu").addEventListener("click", openMenu);
  $("closeMenu").addEventListener("click", closeMenu);
  overlay.addEventListener("click", closeMenu);
  document.addEventListener("keydown", (e)=>{ if(e.key==="Escape") { closeMenu(); closeChat(); } });

  function openMenu(){
    drawer.classList.add("open");
    overlay.classList.add("show");
    drawer.setAttribute("aria-hidden","false");
  }
  function closeMenu(){
    drawer.classList.remove("open");
    overlay.classList.remove("show");
    drawer.setAttribute("aria-hidden","true");
  }

  function showPage(pageKey){
    document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
    const el = document.querySelector("#page-" + pageKey);
    if(el) el.classList.add("active");

    document.querySelectorAll("#nav a").forEach(a=>a.classList.remove("active"));
    const navA = document.querySelector(`#nav a[data-page="${pageKey}"]`);
    if(navA) navA.classList.add("active");

    document.querySelectorAll("[data-pagebtn]").forEach(b=>b.classList.remove("active"));
    const b = document.querySelector(`[data-pagebtn="${pageKey}"]`);
    if(b) b.classList.add("active");

    closeMenu();
    window.scrollTo({top:0, behavior:"smooth"});
  }

  document.querySelectorAll("#nav a").forEach(a=>{
    a.addEventListener("click",(e)=>{
      e.preventDefault();
      showPage(a.dataset.page);
    })
  });

  document.querySelectorAll("[data-pagebtn]").forEach(b=>{
    b.addEventListener("click", ()=>{
      showPage(b.dataset.pagebtn);
    })
  });

  document.querySelectorAll("[data-goto]").forEach(b=>{
    b.addEventListener("click", ()=> showPage(b.dataset.goto));
  });

  $("btnVerCotMantto").addEventListener("click", ()=> showPage("cotizaciones"));

  // ---- Garaje ----
  function renderVehList(){
    const list = $("vehList");
    list.innerHTML = "";
    vehicles.forEach(v=>{
      const div = document.createElement("div");
      div.className = "veh" + (v.id===activeVehicleId ? " active":"");
      div.innerHTML = `
        <div>
          <div class="name">${v.label}</div>
          <div class="meta">${fmtKm(v.km)} km ‚Ä¢ ${v.motor || "‚Äî"} ‚Ä¢ ${v.placa || "sin placa"}</div>
        </div>
        <div class="chip">Usar</div>
      `;
      div.addEventListener("click", ()=> setActiveVehicle(v.id));
      list.appendChild(div);
    });
  }

  $("btnAddVeh").addEventListener("click", ()=>{
    const marca = $("fMarca").value.trim();
    const modelo = $("fModelo").value.trim();
    const anio = parseInt($("fAnio").value || "0", 10);
    const motor = $("fMotor").value.trim();
    const km = parseInt($("fKm").value || "0", 10);
    const placa = $("fPlaca").value.trim();

    if(!marca || !modelo || !anio){
      alert("Completa al menos Marca, Modelo y A√±o.");
      return;
    }

    const id = Math.max(...vehicles.map(v=>v.id))+1;
    const label = `${marca} ${modelo} ${anio}`;
    vehicles.push({id, label, marca, modelo, anio, motor, km, placa});

    ["fMarca","fModelo","fAnio","fMotor","fKm","fPlaca"].forEach(k=>$(k).value="");
    setActiveVehicle(id);
    alert("Veh√≠culo agregado y activado.");
  });

  // ---- Planificador ----
  function statusFromRemaining(rem){
    if(rem <= 0) return "bad";
    if(rem <= 1500) return "warn";
    return "ok";
  }

  function renderComponents(){
    const v = getActiveVehicle();
    const list = $("compList");
    list.innerHTML = "";

    components.forEach(c=>{
      const last = c.lastChangeKm || 0;
      const nextDue = last + c.lifeKm;
      const rem = nextDue - v.km;
      const status = statusFromRemaining(rem);

      const used = Math.max(0, v.km - last);
      const pct = Math.min(100, Math.round((used / c.lifeKm) * 100));
      const color = status==="ok" ? "var(--ok)" : status==="warn" ? "var(--warn)" : "var(--bad)";

      const kmPerMonth = 1200; // demo
      const months = rem > 0 ? Math.max(0.1, rem / kmPerMonth) : 0;

      const div = document.createElement("div");
      div.className = "comp";
      div.innerHTML = `
        <div class="top">
          <div style="display:flex; gap:10px; align-items:flex-start">
            <input type="checkbox" style="margin-top:4px; transform:scale(1.12)" title="Marcar como atendido (demo)">
            <div>
              <div class="name">${c.name}</div>
              <div class="small">Vida √∫til: ${fmtKm(c.lifeKm)} km ‚Ä¢ √öltimo cambio: ${last ? fmtKm(last) : "0 (desde compra)"}</div>
              <div class="small">Costo ref.: S/ ${c.cost} ‚Ä¢ Pr√≥ximo: ${fmtKm(nextDue)} km ‚Ä¢ ${rem>0 ? `${fmtKm(rem)} km restantes` : "Vencido"}</div>
            </div>
          </div>

          <div style="display:flex; flex-direction:column; gap:8px; align-items:flex-end">
            <span class="status-pill" style="border-color:${color}; color:${status==="ok"?"#166534":status==="warn"?"#92400e":"#991b1b"}">
              ${status==="ok"?"OK (Verde)":status==="warn"?"Pr√≥ximo (Amarillo)":"Urgente (Rojo)"}
            </span>
            <span class="chip">${rem>0 ? `~ ${(months).toFixed(1)} meses` : `Cambiar ya`}</span>
          </div>
        </div>

        <div class="bar">
          <div style="width:${pct}%; background:${color}"></div>
        </div>

        <div class="cta" style="margin-top:10px">
          <button class="btn">Ver repuestos</button>
          <button class="btn">Buscar alternos</button>
        </div>
      `;
      list.appendChild(div);
    });

    // KPI + sem√°foro general
    let ok=0, warn=0, bad=0;
    components.forEach(c=>{
      const last = c.lastChangeKm || 0;
      const nextDue = last + c.lifeKm;
      const rem = nextDue - v.km;
      const s = statusFromRemaining(rem);
      if(s==="ok") ok++; else if(s==="warn") warn++; else bad++;
    });
    $("kpiOk").textContent = ok;
    $("kpiWarn").textContent = warn;
    $("kpiBad").textContent = bad;

    const traffic = bad>0 ? "üî¥ Rojo" : warn>0 ? "üü° Amarillo" : "üü¢ Verde";
    $("trafficLabel").textContent = "Estado general: " + traffic;
  }

  $("btnUpdateKm").addEventListener("click", ()=>{
    const v = getActiveVehicle();
    const newKm = parseInt($("kmUpdate").value || "0", 10);
    if(!newKm || newKm < 0){ alert("Ingresa un km v√°lido."); return; }
    v.km = newKm;
    $("kmUpdate").value = "";
    setActiveVehicle(activeVehicleId);
    alert("Km actualizado. Diagn√≥stico recalculado.");
  });

  $("btnRegExt").addEventListener("click", ()=>{
    const compName = $("extComp").value.trim().toLowerCase();
    const km = parseInt($("extKm").value || "0", 10);
    if(!compName || !km){ alert("Completa componente y km."); return; }

    const c = components.find(x=> x.name.toLowerCase().includes(compName) || compName.includes(x.name.toLowerCase().split(" ")[0]));
    if(!c){
      alert("No encontr√© ese componente en la lista demo. (En real: se agrega al cat√°logo de planificador)");
      return;
    }
    c.lastChangeKm = km;
    $("extComp").value=""; $("extKm").value="";
    renderComponents();
    alert("Mantenimiento externo registrado.");
  });

  $("btnAskKm").addEventListener("click", ()=>{
    alert("Demo: aqu√≠ ir√≠a el recordatorio (email/WhatsApp/SMS) para pedir actualizaci√≥n de km.");
  });

  // ---- Cotizaciones ----
  function renderDraftItems(){
    const box = $("quoteItems");
    if(draftItems.length===0){
      box.innerHTML = "<span class='sub'>Sin √≠tems a√∫n.</span>";
      return;
    }
    let total = 0;
    box.innerHTML = draftItems.map((it,i)=>{
      total += it.price;
      return `<div style="display:flex; justify-content:space-between; gap:10px; margin:6px 0">
        <span>${i+1}. ${it.name}</span><b>S/ ${it.price}</b>
      </div>`;
    }).join("") + `<hr style="border-color:rgba(231,233,240,.95);margin:10px 0">
    <div style="display:flex; justify-content:space-between"><span><b>Total</b></span><b>S/ ${total}</b></div>`;
  }

  $("btnAddItem").addEventListener("click", ()=>{
    const name = $("qItem").value.trim();
    const price = parseFloat($("qPrecio").value || "0");
    if(!name || !price){ alert("Ingresa √≠tem y precio."); return; }
    draftItems.push({name, price});
    $("qItem").value=""; $("qPrecio").value="";
    renderDraftItems();
  });

  $("btnSaveQuote").addEventListener("click", ()=>{
    const title = $("qTitulo").value.trim() || "Cotizaci√≥n sin t√≠tulo";
    const notes = $("qNotas").value.trim();
    const v = getActiveVehicle();
    if(draftItems.length===0){ alert("Agrega al menos un √≠tem."); return; }
    const id = quotes.length + 1;
    const total = draftItems.reduce((s,x)=>s+x.price,0);
    quotes.unshift({id, title, notes, vehicle:v.label, total, items:[...draftItems], date:new Date().toLocaleString()});
    draftItems = [];
    ["qTitulo","qNotas"].forEach(k=>$(k).value="");
    renderDraftItems();
    renderQuotes();
    alert("Cotizaci√≥n guardada.");
    showPage("cotizaciones");
  });

  function renderQuotes(){
    $("quotesCount").textContent = `${quotes.length} registradas`;
    if(quotes.length===0){
      $("quotesTable").innerHTML = "<div class='sub'>A√∫n no tienes cotizaciones.</div>";
      return;
    }
    $("quotesTable").innerHTML = quotes.map(q=>`
      <div class="card soft" style="margin-bottom:10px">
        <div style="display:flex; justify-content:space-between; gap:10px; align-items:flex-start">
          <div>
            <div style="font-weight:900">${q.title}</div>
            <div class="sub" style="margin:6px 0 0">Veh√≠culo: <b>${q.vehicle}</b> ‚Ä¢ ${q.date}</div>
            ${q.notes ? `<div class="sub" style="margin:6px 0 0">Notas: ${q.notes}</div>` : ""}
          </div>
          <div style="text-align:right">
            <div class="chip"><b>Total:</b> S/ ${q.total.toFixed(2)}</div>
          </div>
        </div>
        <div class="sub" style="margin-top:10px">
          ${q.items.slice(0,4).map(i=>`‚Ä¢ ${i.name} (S/ ${i.price})`).join("<br>")}
          ${q.items.length>4 ? `<br>‚Ä¶ +${q.items.length-4} √≠tems` : ""}
        </div>
      </div>
    `).join("");
  }

  // ---- Chat ----
  const chatPanel = $("chatPanel");
  function openChat(){ chatPanel.classList.add("show"); chatPanel.setAttribute("aria-hidden","false"); }
  function closeChat(){ chatPanel.classList.remove("show"); chatPanel.setAttribute("aria-hidden","true"); }
  $("chatFab").addEventListener("click", ()=> chatPanel.classList.contains("show") ? closeChat() : openChat());
  $("chatClose").addEventListener("click", closeChat);

  function sendChat(){
    const txt = $("chatInput").value.trim();
    if(!txt) return;
    const wrap = $("chatBody");

    const me = document.createElement("div");
    me.className="msg";
    me.style.color="var(--text)";
    me.innerHTML = `<b>T√∫:</b> ${txt}`;
    wrap.appendChild(me);

    const v = getActiveVehicle();
    const bot = document.createElement("div");
    bot.className="msg";
    bot.innerHTML = `Entendido. Estoy usando el perfil <b>${v.label}</b>. ¬øQuieres OEM o alternos? (Demo)`;
    wrap.appendChild(bot);

    $("chatInput").value="";
    wrap.scrollTop = wrap.scrollHeight;
  }
  $("chatSend").addEventListener("click", sendChat);
  $("chatInput").addEventListener("keydown",(e)=>{ if(e.key==="Enter") sendChat(); });

  // Botones r√°pidos
  $("btnAsesor").addEventListener("click", openChat);
  $("btnAsesor2").addEventListener("click", openChat);
  $("btnFoto").addEventListener("click", ()=> alert("Demo: aqu√≠ abrir√≠as la pantalla de subir foto / IA."));
  $("btnSubirFoto").addEventListener("click", ()=> alert("Demo: aqu√≠ abrir√≠as el flujo de subir foto."));

  // Init
  renderVehList();
  renderDraftItems();
  renderQuotes();
  setActiveVehicle(activeVehicleId);
</script>
</body>
</html>
